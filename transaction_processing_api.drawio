<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36" version="24.8.2">
  <diagram name="Page-1" id="5doB0BVXISMkJX6TuyT-">
    <mxGraphModel dx="2314" dy="1112" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-1" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.dynamo_db;fillColor=#2E73B8;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1195" y="170" width="72" height="81" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-36" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1110" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-2" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.dynamo_db;fillColor=#2E73B8;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1340" y="690" width="72" height="81" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-3" value="TRANSACTIONS" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1373" y="430" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-6" value="QUEUED_TRANSACTIONS" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1291" y="810" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-7" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.dynamo_db;fillColor=#2E73B8;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1412" y="330" width="72" height="81" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-8" value="ACCOUNTS" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1171" y="271" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-11" value="" style="dashed=0;outlineConnect=0;html=1;align=center;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;shape=mxgraph.weblogos.json" parent="1" vertex="1">
          <mxGeometry x="240" y="483.2" width="70" height="75.8" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-14" value="{&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;externalId: ID de la TRX que es enviado por la api externa.&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ip: IP del momento en que fue realizada la TRX.&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;type: tipo de operación (si es con dinero en cuenta u otra opción de pago).&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;currency: tipo de monera de la TRX.&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;amount: monto de la transacción.&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;buyer: {&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;firstName: nombre del comprador&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;lastName:&amp;nbsp; apellido del comprador.&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;cellPhone: número de celular.&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;email: dirección de correo electrónico.&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;personalIdType: tipo de documento.&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;personalIdNumber: número de documento.&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;address: dirección&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="80" y="640" width="440" height="260" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-15" value="/v1/transactions/new" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="220" y="570" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-16" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;fillColor=#E7157B;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.sqs;" parent="1" vertex="1">
          <mxGeometry x="760" y="704" width="78" height="78" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-18" value="&lt;div style=&quot;background-color: rgb(40, 44, 52); font-family: &amp;quot;FantasqueSansMono Nerd Font&amp;quot;, &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; font-size: 15px; line-height: 20px; white-space-collapse: preserve;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="760" y="798" width="20" height="30" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-19" value="RECEIVE-TRANSACTIONS" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="730" y="830" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-35" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-20" target="77ZhGkkqVVTmG6hvkD-U-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-37" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-20" target="77ZhGkkqVVTmG6hvkD-U-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-20" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.lambda_function;fillColor=#F58534;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="1038.5" y="710" width="69" height="72" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-33" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=1;entryDx=0;entryDy=0;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-22" target="77ZhGkkqVVTmG6hvkD-U-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-22" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.lambda_function;fillColor=#F58534;gradientColor=none;" parent="1" vertex="1">
          <mxGeometry x="780" y="280" width="69" height="72" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-23" value="VALIDATION-SERVICE" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="724" y="360" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-25" value="Chequea que la transacción no esté duplicada.&lt;br&gt;Si lo está, se borra de la SQS.&lt;br&gt;Si no lo está, se almadena en una Dynamo.." style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="960" y="838" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-27" value="Se trigerea cuando entran mensajes&lt;br&gt;en la queue" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="980" y="798" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-30" value="Hace las validaciones de seguridad de las transacción por los siguientes parámetros:&lt;br&gt;1) Si la saldo de la cuenta.&lt;br&gt;2) Que el comprador sea el titular de la cuenta&lt;br&gt;3) Si la currency es soportada.&lt;br&gt;4) Chequear que la dirección de la IP coincida con la zona geográfica del comprador.&lt;br&gt;5) Cantidad de transacciones realizadas durantre un periodo de tiempo.&lt;br&gt;&lt;br&gt;Si pasa todas las validaciones, la transacción es almacenada en la tabla&lt;br&gt;de Dynamo TRANSACTIONS con el status PAID.&lt;br&gt;Si las validaciones fallan, la transacción es almacenada dentro de la tabla TRANSACTIONS&amp;nbsp;&lt;div&gt;con la description del motivo del rechazo y status REJECTED&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="539" y="390" width="520" height="190" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-32" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.327;entryY=1.017;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-22" target="77ZhGkkqVVTmG6hvkD-U-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="77ZhGkkqVVTmG6hvkD-U-34" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="77ZhGkkqVVTmG6hvkD-U-16" target="77ZhGkkqVVTmG6hvkD-U-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
